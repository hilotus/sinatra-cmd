require 'bundler'
require 'bundler/setup'

Bundler.require
require 'pry' if development? or test?

require 'sinatra/reloader' if development?
require 'sinatra/namespace'
require 'sinatra/json'

module <%= app_name.split(/\-|\_/).map(&:capitalize).join('') %>
  API_VERSION = '1'

  class App < Sinatra::Base
    register Sinatra::Namespace
    helpers Sinatra::JSON
    # language automatic changed by params['locale']
    register Sinatra::R18n

    set :logging, true

    configure do
      # Mongoid config file load
      # Mongoid.load!(File.expand_path('../database.yml', __FILE__))

      # Error blocks don't trigger in development mode.
      # https://github.com/sinatra/sinatra/issues/578
      set :show_exceptions, :after_handler
    end
  end
end
